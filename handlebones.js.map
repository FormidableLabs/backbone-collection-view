{"version":3,"file":"handlebones.js.map","sources":["handlebones.js"],"names":["root","factory","define","amd","_","Backbone","Handlebars","$","exports","Handlebones","require","jQuery","Zepto","ender","this","hasClassName","name","RegExp","test","className","addClassName","call","join","removeClassName","regexp","replace","triggerReadyOnChild","child","_isReady","trigger","onReady","each","children","listenTo","configureView","_renderCount","viewsIndexedByCid","cid","ensureRendered","render","replaceHTML","html","string","hasDOMLib","isIE","fn","jquery","el","hasChildNodes","removeChild","childNodes","$el","empty","append","innerHTML","handleChangeFromEmptyToNotEmpty","emptyClass","_emptyViewInstance","remove","handleChangeFromNotEmptyToEmpty","emptyView","_emptyViewTemplate","extend","template","addChild","appendTo","applyVisibilityFilter","itemFilter","collection","forEach","applyItemVisiblityFilter","model","selector","modelCidAttributeName","els","querySelectorAll","style","display","itemShouldBeVisible","indexOf","deref","token","scope","encode","match","segments","split","len","length","i","isString","encodeURIComponent","normalizeHTMLAttributeOptions","options","tag","tagName","appendChildViews","placeholders","viewPlaceholderAttributeName","placeholderId","getAttribute","view","parentNode","replaceChild","VERSION","viewNameAttributeName","viewCidAttributeName","linkAttributeName","isIE11","navigator","userAgent","exec","toLowerCase","ElementProto","Element","prototype","elementAddEventListener","addEventListener","eventName","listener","attachEvent","View","VM","noop","output","isFunction","context","appendChild","target","parent","removeAttribute","response","apply","arguments","toString","setElement","setAttribute","_ensureElement","LayoutView","setView","callback","oldView","_view","bind","getView","ItemView","attributes","CollectionView","itemView","initialize","reset","sort","change","add","index","appendItem","removeItem","_itemViewTemplate","previousModel","at","last","after","insertBefore","firstChild","querySelector","viewCid","updateFilter","Util","content","htmlAttributes","omit","map","value","key","formattedValue","expandToken","Utils","escapeExpression","isUndefined","input","re","ret","mapper","param","params","helper","shift","push","helpers","registerHelper","SafeString","url","fragment","head","history","_hasPushState","substr","args","toArray","pop","hash","href","document","readyState","body","event","metaKey","shiftKey","navigate","preventDefault","returnValue","closest","attr"],"mappings":"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"}