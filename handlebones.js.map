{"version":3,"file":"handlebones.js.map","sources":["handlebones.js"],"names":["root","factory","define","amd","_","Backbone","Handlebars","$","exports","Handlebones","require","jQuery","Zepto","ender","this","hasClassName","name","RegExp","test","className","addClassName","call","join","removeClassName","regexp","replace","triggerReadyOnChild","child","_isReady","trigger","onReady","each","children","listenTo","configureView","_renderCount","viewsIndexedByCid","cid","ensureRendered","render","replaceHTML","html","string","hasDOMLib","isIE","fn","jquery","el","hasChildNodes","removeChild","childNodes","$el","empty","append","innerHTML","handleChangeFromEmptyToNotEmpty","emptyClassName","_emptyViewInstance","remove","handleChangeFromNotEmptyToEmpty","emptyView","addChild","appendTo","applyVisibilityFilter","modelFilter","collection","forEach","applyModelVisiblityFilter","model","selector","modelCidAttributeName","els","style","display","modelShouldBeVisible","indexOf","useDocumentFragment","callback","document","createDocumentFragment","appendChild","deref","token","scope","encode","match","segments","split","len","length","i","isString","encodeURIComponent","normalizeHTMLAttributeOptions","options","tag","tagName","appendChildViews","placeholders","viewPlaceholderAttributeName","placeholderId","getAttribute","view","parentNode","replaceChild","VERSION","viewNameAttributeName","viewCidAttributeName","linkAttributeName","isIE11","navigator","userAgent","exec","toLowerCase","ElementProto","Element","prototype","elementAddEventListener","addEventListener","eventName","listener","attachEvent","View","extend","template","VM","noop","output","isFunction","context","target","parent","removeAttribute","response","apply","arguments","toString","setElement","setAttribute","_ensureElement","LayoutView","setView","oldView","_view","bind","getView","ModelView","initialize","attributes","CollectionView","modelView","reset","sort","change","add","index","addModel","removeModel","insertionPoint","isUndefined","previousModel","at","nextSibling","firstChild","insertBefore","viewCid","updateFilter","Util","content","htmlAttributes","omit","map","value","key","formattedValue","expandToken","Utils","escapeExpression","input","re","ret","mapper","param","params","helper","shift","push","helpers","registerHelper","SafeString","url","fragment","head","history","_hasPushState","substr","args","toArray","pop","hash","href","readyState","body","event","metaKey","shiftKey","navigate","preventDefault","returnValue","closest","attr"],"mappings":"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"}