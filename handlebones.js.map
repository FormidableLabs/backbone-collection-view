{"version":3,"file":"handlebones.js.map","sources":["handlebones.js"],"names":["root","factory","define","amd","_","Backbone","Handlebars","$","exports","Handlebones","require","jQuery","Zepto","ender","this","hasClassName","name","RegExp","test","className","addClassName","call","join","removeClassName","regexp","replace","triggerReadyOnChild","child","_isReady","trigger","onReady","each","children","listenTo","configureView","_renderCount","viewsIndexedByCid","cid","ensureRendered","render","replaceHTML","html","string","hasDOMLib","isIE","fn","jquery","el","hasChildNodes","removeChild","childNodes","$el","empty","append","innerHTML","handleChangeFromEmptyToNotEmpty","emptyClass","_emptyViewInstance","remove","handleChangeFromNotEmptyToEmpty","emptyView","_emptyViewTemplate","extend","template","addChild","appendTo","applyVisibilityFilter","itemFilter","collection","forEach","applyItemVisiblityFilter","model","selector","modelCidAttributeName","els","querySelectorAll","style","display","itemShouldBeVisible","indexOf","deref","token","scope","encode","match","segments","split","len","length","i","isString","encodeURIComponent","normalizeHTMLAttributeOptions","options","tag","tagName","appendChildViews","placeholders","viewPlaceholderAttributeName","placeholderId","getAttribute","view","parentNode","replaceChild","VERSION","viewNameAttributeName","viewCidAttributeName","linkAttributeName","isIE11","navigator","userAgent","exec","toLowerCase","ElementProto","Element","prototype","elementAddEventListener","addEventListener","eventName","listener","attachEvent","View","VM","noop","output","isFunction","context","appendChild","target","parent","removeAttribute","response","apply","arguments","toString","setElement","setAttribute","_ensureElement","_onViewHelper","LayoutView","setView","callback","oldView","_view","bind","getView","ItemView","attributes","CollectionView","itemView","initialize","reset","sort","change","add","index","appendItem","removeItem","_itemViewTemplate","previousModel","at","last","after","insertBefore","firstChild","querySelector","viewCid","updateFilter","inverse","Util","content","htmlAttributes","omit","map","value","key","formattedValue","expandToken","Utils","escapeExpression","isUndefined","input","re","ret","mapper","param","params","helper","shift","push","helpers","registerHelper","SafeString","url","fragment","head","history","_hasPushState","substr","args","toArray","pop","hash","href","document","readyState","body","event","metaKey","shiftKey","navigate","preventDefault","returnValue","closest","attr"],"mappings":"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"}