{"version":3,"file":"handlebones.js.map","sources":["handlebones.js"],"names":["root","factory","define","amd","_","Backbone","Handlebars","$","exports","Handlebones","require","jQuery","Zepto","ender","this","hasClassName","name","RegExp","test","className","addClassName","call","join","removeClassName","regexp","replace","triggerReadyOnChild","child","_isReady","trigger","onReady","each","children","listenTo","configureView","_renderCount","viewsIndexedByCid","cid","ensureRendered","render","replaceHTML","html","string","hasDOMLib","isIE","fn","jquery","el","hasChildNodes","removeChild","childNodes","$el","empty","append","innerHTML","handleChangeFromEmptyToNotEmpty","emptyClass","_emptyViewInstance","remove","handleChangeFromNotEmptyToEmpty","emptyView","_emptyViewTemplate","extend","template","addChild","appendTo","applyVisibilityFilter","modelFilter","collection","forEach","applyModelVisiblityFilter","model","selector","modelCidAttributeName","els","querySelectorAll","style","display","modelShouldBeVisible","indexOf","deref","token","scope","encode","match","segments","split","len","length","i","isString","encodeURIComponent","normalizeHTMLAttributeOptions","options","tag","tagName","appendChildViews","placeholders","viewPlaceholderAttributeName","placeholderId","getAttribute","view","parentNode","replaceChild","VERSION","viewNameAttributeName","viewCidAttributeName","linkAttributeName","isIE11","navigator","userAgent","exec","toLowerCase","ElementProto","Element","prototype","elementAddEventListener","addEventListener","eventName","listener","attachEvent","View","VM","noop","output","isFunction","context","appendChild","target","parent","removeAttribute","response","apply","arguments","toString","setElement","setAttribute","_ensureElement","LayoutView","setView","callback","oldView","_view","bind","getView","ModelView","attributes","CollectionView","modelView","initialize","reset","sort","change","add","index","appendModel","removeModel","previousModel","at","last","after","insertBefore","firstChild","querySelector","viewCid","updateFilter","Util","content","htmlAttributes","omit","map","value","key","formattedValue","expandToken","Utils","escapeExpression","isUndefined","input","re","ret","mapper","param","params","helper","shift","push","helpers","registerHelper","SafeString","url","fragment","head","history","_hasPushState","substr","args","toArray","pop","hash","href","document","readyState","body","event","metaKey","shiftKey","navigate","preventDefault","returnValue","closest","attr"],"mappings":"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"}